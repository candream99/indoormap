<!DOCTYPE html>
<html>
<head>
    <title>교보빌딩 1층 실내 지도 (Ground Overlay)</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
        /* 지도를 담을 div의 크기를 설정합니다. */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #map {
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <script>
        // 이 함수는 Google Maps API가 로드된 후 자동으로 실행됩니다.
        function initMap() {
            // 사용자님이 제공해주신 네 모서리 좌표를 기반으로 남서쪽(SW)과 북동쪽(NE) 경계를 계산합니다.
            
            // 네 모서리 좌표 (위도, 경도)
            // 위쪽 왼쪽 (NW): 37.571347, 126.977640
            // 위쪽 오른쪽 (NE): 37.571352, 126.978030
            // 아래쪽 왼쪽 (SW): 37.570529, 126.977658
            // 아래쪽 오른쪽 (SE): 37.570533, 126.978045

            // 1. Ground Overlay를 지도상에 배치할 최종 경계를 설정합니다.
            const imageBounds = {
                // North: 네 모서리 중 가장 큰 위도값 (위쪽 오른쪽/왼쪽 중 큰 값)
                north: 37.571352,  
                // South: 네 모서리 중 가장 작은 위도값 (아래쪽 오른쪽/왼쪽 중 작은 값)
                south: 37.570529,  
                // East: 네 모서리 중 가장 큰 경도값 (위쪽 오른쪽/아래쪽 오른쪽 중 큰 값)
                east: 126.978045,  
                // West: 네 모서리 중 가장 작은 경도값 (위쪽 왼쪽/아래쪽 왼쪽 중 작은 값)
                west: 126.977640   
            };

            // 지도의 중심 좌표는 경계의 중앙으로 설정합니다.
            const kyoboCenter = { 
                lat: (imageBounds.north + imageBounds.south) / 2, 
                lng: (imageBounds.east + imageBounds.west) / 2 
            };

            // 2. 지도를 생성합니다.
            const map = new google.maps.Map(document.getElementById('map'), {
                zoom: 18, // 줌 레벨을 실내 지도가 잘 보이도록 설정
                center: kyoboCenter,
                mapTypeId: 'roadmap' // 일반 지도 (요청하신 대로 유지)
            });

            // 3. Ground Overlay에 사용할 이미지 파일 경로를 설정합니다. (새 파일명 적용)
            const image_url = '1F_2.jpg'; 

            // 4. Ground Overlay 객체를 생성하고 지도에 추가합니다.
            const historicalOverlay = new google.maps.GroundOverlay(
                image_url,
                imageBounds,
                {
                    opacity: 0.8 // 오버레이 투명도 설정 (지도와 겹쳐 보이도록)
                }
            );
            historicalOverlay.setMap(map);

            // 5. 사용자가 오버레이 경계를 조정할 수 있도록 사각형을 추가합니다. (선택 사항)
            // 정확한 좌표를 반영했으므로, 이제는 좌표 확인용 사각형은 주석 처리하거나 제거하셔도 됩니다.
            const rectangle = new google.maps.Rectangle({
                strokeColor: '#FF0000',
                strokeOpacity: 0.8,
                strokeWeight: 2,
                fillColor: '#FF0000',
                fillOpacity: 0.1,
                bounds: imageBounds,
                editable: true, // 사용자가 경계를 드래그하여 조정할 수 있게 유지
                map: map
            });

            // 경계가 변경될 때마다 콘솔에 새 좌표를 출력합니다. (좌표 조정에 도움)
            google.maps.event.addListener(rectangle, 'bounds_changed', function() {
                const newBounds = rectangle.getBounds();
                console.log("새로운 NorthEast 좌표:", newBounds.getNorthEast().toUrlValue());
                console.log("새로운 SouthWest 좌표:", newBounds.getSouthWest().toUrlValue());
            });
        }
    </script>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap">
    </script>
</body>
</html>
